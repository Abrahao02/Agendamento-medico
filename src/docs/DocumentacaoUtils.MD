# üìö Documenta√ß√£o Completa - Utils do Projeto

> **Vers√£o:** 2.1  
> **√öltima atualiza√ß√£o:** Janeiro 2026  
> **Total de Utils:** 26 fun√ß√µes

---

## üìã √çndice

1. [WhatsApp Utils](#-whatsapp-utils) ‚ú® NOVO
2. [Formata√ß√£o](#-formata√ß√£o)
3. [Valida√ß√µes](#-valida√ß√µes)
4. [Filtros de Data](#-filtros-de-data)
5. [Filtros de Appointments](#-filtros-de-appointments)
6. [Filtros de Availability](#-filtros-de-availability)
7. [Agrupamento](#-agrupamento)
8. [Estat√≠sticas](#-estat√≠sticas)
9. [Helpers de Pacientes](#-helpers-de-pacientes) ‚ú® NOVO
10. [Helpers de Appointments](#-helpers-de-appointments) ‚ú® NOVO
11. [Helpers de Mensagens](#-helpers-de-mensagens) ‚ú® NOVO
12. [Helpers Gerais](#-helpers-gerais)
13. [Utilit√°rios de Pacientes](#-utilit√°rios-de-pacientes) ‚ú® NOVO

---

## üì± WhatsApp Utils

### `cleanWhatsapp(value)` ‚ú® NOVO
**Arquivo**: `src/utils/whatsapp/cleanWhatsapp.js`

Remove toda formata√ß√£o do WhatsApp, retornando apenas n√∫meros.

```javascript
import { cleanWhatsapp } from "@/utils/whatsapp/cleanWhatsapp";

cleanWhatsapp("(11) 98765-4321");
// ‚ûú "11987654321"

cleanWhatsapp("11 9 8765 4321");
// ‚ûú "11987654321"

cleanWhatsapp("abc11987xyz");
// ‚ûú "11987"

cleanWhatsapp("");
// ‚ûú ""
```

**Par√¢metros:**
- `value` (string): N√∫mero com ou sem formata√ß√£o

**Retorna:** `string` - Apenas n√∫meros (sem limite de tamanho)

**Uso nos Hooks:**
- `usePatients` (3 vezes)
- `useAgenda`
- `usePublicSchedule`
- `useRegister`

---

### `validateWhatsappLength(whatsapp)` ‚ú® NOVO
**Arquivo**: `src/utils/whatsapp/validateWhatsappLength.js`

Valida se o WhatsApp tem comprimento v√°lido (10-11 d√≠gitos).

```javascript
import { validateWhatsappLength } from "@/utils/whatsapp/validateWhatsappLength";

validateWhatsappLength("11987654321");
// ‚ûú { valid: true, length: 11 }

validateWhatsappLength("1234567890");
// ‚ûú { valid: true, length: 10 }

validateWhatsappLength("123456789");
// ‚ûú { 
//   valid: false, 
//   length: 9, 
//   message: "WhatsApp inv√°lido. Digite DDD + n√∫mero (10 a 11 d√≠gitos)." 
// }
```

**Par√¢metros:**
- `whatsapp` (string): N√∫mero apenas com d√≠gitos

**Retorna:** `Object`
```typescript
{
  valid: boolean,
  length: number,
  message?: string  // Apenas quando valid = false
}
```

---

### `formatWhatsapp(value)`
**Arquivo**: `src/utils/formatter/formatWhatsapp.js`

Formata um n√∫mero de telefone no padr√£o brasileiro.

```javascript
import { formatWhatsapp } from "@/utils/formatter/formatWhatsapp";

formatWhatsapp("11987654321");
// ‚ûú "(11) 98765-4321"

formatWhatsapp("1198765");
// ‚ûú "(11) 98765"

formatWhatsapp("11");
// ‚ûú "11"
```

**Par√¢metros:**
- `value` (string): N√∫mero de telefone com ou sem formata√ß√£o

**Retorna:** `string` - N√∫mero formatado como `(XX) XXXXX-XXXX`

**Regras:**
- Remove todos os caracteres n√£o num√©ricos
- Limita a 11 d√≠gitos
- Formata progressivamente conforme digita√ß√£o

---

## üé® Formata√ß√£o

### `formatDate(input)`
**Arquivo**: `src/utils/formatter/formatDate.js`

Converte datas de diversos formatos para o padr√£o brasileiro DD/MM/YYYY.

```javascript
import formatDate from "@/utils/formatter/formatDate";

// ISO string
formatDate("2026-01-15");
// ‚ûú "15/01/2026"

// Date object
formatDate(new Date(2026, 0, 15));
// ‚ûú "15/01/2026"

// Timestamp
formatDate(1736899200000);
// ‚ûú "15/01/2026"

// Valores inv√°lidos
formatDate(null);     // ‚ûú ""
formatDate("texto");  // ‚ûú "texto"
```

**Par√¢metros:**
- `input` (string | Date | number | null | undefined): Data em qualquer formato

**Retorna:** `string` - Data formatada como `DD/MM/YYYY`

**Casos Suportados:**
- ‚úÖ ISO string (`YYYY-MM-DD`)
- ‚úÖ Date object
- ‚úÖ Timestamp (n√∫mero)
- ‚úÖ ISO completo (`YYYY-MM-DDTHH:mm:ss.sssZ`)
- ‚ö†Ô∏è Retorna string vazia para `null` ou `undefined`
- ‚ö†Ô∏è Retorna a pr√≥pria string se n√£o conseguir converter

---

## ‚úÖ Valida√ß√µes

### `validateFormField(field, value, rules)` ‚ú® NOVO
**Arquivo**: `src/utils/validators/formValidation.js`

Validador universal para campos de formul√°rio com m√∫ltiplas regras.

```javascript
import { validateFormField } from "@/utils/validators/formValidation";

// Nome obrigat√≥rio
validateFormField("name", "", { required: true });
// ‚ûú { valid: false, error: "Name √© obrigat√≥rio." }

validateFormField("name", "Jo√£o Silva", { required: true });
// ‚ûú { valid: true }

// Email v√°lido
validateFormField("email", "invalid", { required: true, email: true });
// ‚ûú { valid: false, error: "Email inv√°lido." }

validateFormField("email", "user@example.com", { required: true, email: true });
// ‚ûú { valid: true }

// WhatsApp
validateFormField("whatsapp", "11987654321", { required: true, whatsapp: true });
// ‚ûú { valid: true }

// Senhas iguais
validateFormField("confirmPassword", "123", { 
  required: true, 
  match: { value: "456", message: "As senhas n√£o coincidem." }
});
// ‚ûú { valid: false, error: "As senhas n√£o coincidem." }

// Comprimento m√≠nimo
validateFormField("password", "123", { minLength: 8 });
// ‚ûú { valid: false, error: "M√≠nimo de 8 caracteres." }

// Padr√£o customizado
validateFormField("cpf", "123", { 
  pattern: /^\d{11}$/ 
});
// ‚ûú { valid: false, error: "Formato inv√°lido." }

// Valida√ß√£o customizada
validateFormField("age", "15", {
  custom: (value) => {
    const age = Number(value);
    if (age < 18) {
      return { valid: false, error: "Deve ser maior de 18 anos." };
    }
    return { valid: true };
  }
});
```

**Par√¢metros:**
- `field` (string): Nome do campo
- `value` (any): Valor do campo
- `rules` (Object): Regras de valida√ß√£o

**Rules Dispon√≠veis:**
```typescript
{
  required?: boolean,           // Campo obrigat√≥rio
  email?: boolean,              // Valida formato de email
  whatsapp?: boolean,           // Valida WhatsApp (10-11 d√≠gitos)
  match?: {                     // Valida igualdade (confirma√ß√£o)
    value: any,
    message?: string
  },
  minLength?: number,           // Comprimento m√≠nimo
  maxLength?: number,           // Comprimento m√°ximo
  pattern?: RegExp,             // Regex customizado
  custom?: (value) => Object    // Valida√ß√£o customizada
}
```

**Retorna:** `Object`
```typescript
{
  valid: boolean,
  error?: string  // Mensagem de erro quando valid = false
}
```

**Uso nos Hooks:**
- `useRegister` - Valida√ß√£o do formul√°rio de registro
- `useLogin` - Valida√ß√£o do formul√°rio de login

---

### `validatePassword(password)` & `isPasswordValid(criteria)`
**Arquivo**: `src/utils/validators/passwordValidation.js`

Valida crit√©rios de senha forte.

```javascript
import { validatePassword, isPasswordValid } from "@/utils/validators/passwordValidation";

const criteria = validatePassword("Senha@123");
// ‚ûú {
//   length: true,     // >= 8 caracteres
//   uppercase: true,  // Tem mai√∫scula
//   lowercase: true,  // Tem min√∫scula
//   number: true,     // Tem n√∫mero
//   symbol: true      // Tem s√≠mbolo
// }

isPasswordValid(criteria);
// ‚ûú true
```

**Crit√©rios:**
| Crit√©rio | Descri√ß√£o | Valida√ß√£o |
|----------|-----------|-----------|
| `length` | M√≠nimo 8 caracteres | `password.length >= 8` |
| `uppercase` | Pelo menos uma mai√∫scula | `/[A-Z]/` |
| `lowercase` | Pelo menos uma min√∫scula | `/[a-z]/` |
| `number` | Pelo menos um n√∫mero | `/\d/` |
| `symbol` | Pelo menos um s√≠mbolo | `/[\W_]/` |

---

## üìÖ Filtros de Data

### `formatDateToQuery(date)`
**Arquivo**: `src/utils/filters/dateFilters.js`

Converte Date object para string YYYY-MM-DD.

```javascript
import { formatDateToQuery } from "@/utils/filters/dateFilters";

formatDateToQuery(new Date(2026, 0, 15));
// ‚ûú "2026-01-15"

formatDateToQuery(null);
// ‚ûú ""
```

**Par√¢metros:**
- `date` (Date): Data a formatar

**Retorna:** `string` - Data no formato `YYYY-MM-DD` ou string vazia

---

### `getTodayString()`
**Arquivo**: `src/utils/filters/dateFilters.js`

Obt√©m a data de hoje em formato YYYY-MM-DD.

```javascript
import { getTodayString } from "@/utils/filters/dateFilters";

getTodayString();
// ‚ûú "2026-01-10" (data atual)
```

**Retorna:** `string` - Data de hoje

---

### `extractYearMonth(dateStr)`
**Arquivo**: `src/utils/filters/dateFilters.js`

Extrai ano e m√™s de uma string de data.

```javascript
import { extractYearMonth } from "@/utils/filters/dateFilters";

extractYearMonth("2026-01-15");
// ‚ûú { year: 2026, month: 1 }

extractYearMonth("15/01/2026");
// ‚ûú null (formato inv√°lido)
```

**Par√¢metros:**
- `dateStr` (string): Data no formato `YYYY-MM-DD`

**Retorna:** `{year: number, month: number} | null`

---

### `isDateInRange(date, startDate, endDate)`
**Arquivo**: `src/utils/filters/dateFilters.js`

Verifica se uma data est√° dentro de um intervalo.

```javascript
import { isDateInRange } from "@/utils/filters/dateFilters";

isDateInRange("2026-01-15", "2026-01-01", "2026-01-31");
// ‚ûú true

isDateInRange("2026-02-01", "2026-01-01", "2026-01-31");
// ‚ûú false

// Sem range definido = sempre true
isDateInRange("2026-01-15", "", "");
// ‚ûú true
```

**Par√¢metros:**
- `date` (string): Data a verificar (YYYY-MM-DD)
- `startDate` (string): Data inicial
- `endDate` (string): Data final

**Retorna:** `boolean`

---

### `isDateInMonthYear(dateStr, month, year)`
**Arquivo**: `src/utils/filters/dateFilters.js`

Verifica se uma data pertence a um m√™s/ano espec√≠fico.

```javascript
import { isDateInMonthYear } from "@/utils/filters/dateFilters";

isDateInMonthYear("2026-01-15", 1, 2026);
// ‚ûú true

isDateInMonthYear("2026-02-15", 1, 2026);
// ‚ûú false
```

**Par√¢metros:**
- `dateStr` (string): Data a verificar (YYYY-MM-DD)
- `month` (number): M√™s (1-12)
- `year` (number): Ano

**Retorna:** `boolean`

---

### `isFutureDate(dateStr)` / `isPastDate(dateStr)`
**Arquivo**: `src/utils/filters/dateFilters.js`

Verifica se uma data √© futura ou passada.

```javascript
import { isFutureDate, isPastDate } from "@/utils/filters/dateFilters";

// Assumindo hoje = 2026-01-10

isFutureDate("2026-01-15");  // ‚ûú true
isPastDate("2026-01-05");    // ‚ûú true
```

**Par√¢metros:**
- `dateStr` (string): Data a verificar (YYYY-MM-DD)

**Retorna:** `boolean`

---

## üîç Filtros de Appointments

### `filterAppointments(appointments, config)`
**Arquivo**: `src/utils/filters/appointmentFilters.js`

Filtra appointments com m√∫ltiplos crit√©rios.

```javascript
import { filterAppointments } from "@/utils/filters/appointmentFilters";

const appointments = [
  { id: 1, date: "2026-01-15", status: "Confirmado", patientName: "Jo√£o" },
  { id: 2, date: "2026-01-20", status: "Pendente", patientName: "Maria" }
];

// Por status
filterAppointments(appointments, { statusFilter: "Confirmado" });

// Por range
filterAppointments(appointments, {
  startDate: "2026-01-01",
  endDate: "2026-01-31"
});

// Por m√™s/ano
filterAppointments(appointments, {
  selectedMonth: 1,
  selectedYear: 2026
});

// M√∫ltiplos filtros
filterAppointments(appointments, {
  statusFilter: "Confirmado",
  searchTerm: "jo√£o",
  futureOnly: true
});
```

**Config Options:**
```typescript
{
  statusFilter?: string,       // "Confirmado", "Pendente", "N√£o Compareceu", "Todos"
  searchTerm?: string,         // Busca em nome ou telefone
  startDate?: string,          // YYYY-MM-DD
  endDate?: string,            // YYYY-MM-DD
  selectedMonth?: number,      // 1-12
  selectedYear?: number,       // Ano
  futureOnly?: boolean,        // Apenas >= hoje
  specificDate?: string        // YYYY-MM-DD (prioridade m√°xima)
}
```

**Retorna:** `Array` - Appointments filtrados

---

### `sortAppointments(appointments, ascending)`
**Arquivo**: `src/utils/filters/appointmentFilters.js`

Ordena appointments por data e hora.

```javascript
import { sortAppointments } from "@/utils/filters/appointmentFilters";

const appointments = [
  { date: "2026-01-20", time: "14:00" },
  { date: "2026-01-15", time: "08:00" }
];

sortAppointments(appointments);
// ‚ûú Ordenados: 15/08:00, 20/14:00

sortAppointments(appointments, false);
// ‚ûú Ordenados: 20/14:00, 15/08:00 (descendente)
```

**Par√¢metros:**
- `appointments` (Array)
- `ascending` (boolean): `true` (padr√£o) = ascendente

**Retorna:** `Array` - Nova array ordenada

---

## üìÜ Filtros de Availability

### `filterAvailableSlots(availability, appointments)`
**Arquivo**: `src/utils/filters/availabilityFilters.js`

Remove slots j√° agendados da disponibilidade.

```javascript
import { filterAvailableSlots } from "@/utils/filters/availabilityFilters";

const availability = [
  { date: "2026-01-15", slots: ["08:00", "09:00", "10:00"] }
];

const appointments = [
  { date: "2026-01-15", time: "09:00" }
];

filterAvailableSlots(availability, appointments);
// ‚ûú [{ date: "2026-01-15", slots: ["08:00", "10:00"] }]
```

**Retorna:** `Array` - Availability apenas com slots livres

---

### `validateAvailability(availability, futureOnly)`
**Arquivo**: `src/utils/filters/availabilityFilters.js`

Valida e filtra availability com crit√©rios de qualidade.

```javascript
import { validateAvailability } from "@/utils/filters/availabilityFilters";

const availability = [
  { date: "2026-01-15", slots: ["08:00"] },
  { date: "2026-01-05", slots: ["10:00"] },  // Passada
  { date: "2026-01-20", slots: [] }          // Vazia
];

validateAvailability(availability);
// ‚ûú [{ date: "2026-01-15", slots: ["08:00"] }]
```

**Valida√ß√µes:**
- ‚úÖ `date` existe e √© string
- ‚úÖ `slots` √© array n√£o vazio
- ‚úÖ `date >= hoje` (se futureOnly = true)

**Retorna:** `Array` - Ordenado por data

---

### `countAvailableSlots(availability)`
**Arquivo**: `src/utils/filters/availabilityFilters.js`

Conta total de slots dispon√≠veis.

```javascript
import { countAvailableSlots } from "@/utils/filters/availabilityFilters";

const availability = [
  { date: "2026-01-15", slots: ["08:00", "09:00", "10:00"] }
];

countAvailableSlots(availability);
// ‚ûú 3
```

---

### `getAvailableSlotsForDate(availability, appointments, date)`
**Arquivo**: `src/utils/filters/availabilityFilters.js`

Obt√©m slots livres para uma data espec√≠fica.

```javascript
import { getAvailableSlotsForDate } from "@/utils/filters/availabilityFilters";

getAvailableSlotsForDate(availability, appointments, "2026-01-15");
// ‚ûú ["08:00", "10:00"] (ordenados, sem agendados)
```

---

## üë• Agrupamento

### `groupAppointmentsByPatient(appointments)`
**Arquivo**: `src/utils/filters/patientGrouping.js`

Agrupa appointments por paciente (WhatsApp).

```javascript
import { groupAppointmentsByPatient } from "@/utils/filters/patientGrouping";

const appointments = [
  {
    patientWhatsapp: "11987654321",
    patientName: "Jo√£o Silva",
    referenceName: "Jo√£o",
    value: 150,
    status: "Confirmado"
  },
  {
    patientWhatsapp: "11987654321",
    value: 150,
    status: "Pendente"
  }
];

groupAppointmentsByPatient(appointments);
// ‚ûú [
//   {
//     name: "Jo√£o",
//     whatsapp: "11987654321",
//     appointments: [/* 2 appointments */],
//     totalValue: 300,
//     statusCounts: { Confirmado: 1, Pendente: 1 }
//   }
// ]
```

**Retorna:** `Array` - Pacientes ordenados por nome

---

## üìä Estat√≠sticas

### `calculateAppointmentStats(appointments, priceMap)`
**Arquivo**: `src/utils/stats/appointmentStats.js`

Calcula estat√≠sticas de appointments.

```javascript
import { calculateAppointmentStats } from "@/utils/stats/appointmentStats";

const appointments = [
  { date: "2026-01-05", status: "Confirmado", patientWhatsapp: "11987654321", value: 150 }
];

const priceMap = {
  "11987654321": 150,
  "11988776655": 200
};

calculateAppointmentStats(appointments, priceMap);
// ‚ûú {
//   totalAppointments: 1,
//   attendedAppointments: 1,  // Confirmado e data <= hoje
//   totalRevenue: 150,
//   averageTicket: 175        // (150+200)/2
// }
```

---

### `calculateStatusSummary(appointments)`
**Arquivo**: `src/utils/stats/appointmentStats.js`

Calcula resumo por status.

```javascript
import { calculateStatusSummary } from "@/utils/stats/appointmentStats";

const appointments = [
  { status: "Confirmado" },
  { status: "Confirmado" },
  { status: "Pendente" }
];

calculateStatusSummary(appointments);
// ‚ûú { Confirmado: 2, Pendente: 1, "N√£o Compareceu": 0 }
```

---

## üßë‚Äç‚öïÔ∏è Helpers de Pacientes

### `generatePatientId(doctorId, whatsapp)` ‚ú® NOVO
**Arquivo**: `src/utils/patients/generatePatientId.js`

Gera ID √∫nico para paciente.

```javascript
import { generatePatientId } from "@/utils/patients/generatePatientId";

generatePatientId("doc123", "(11) 98765-4321");
// ‚ûú "doc123_11987654321"

generatePatientId("doc123", "11 9 8765 4321");
// ‚ûú "doc123_11987654321"
```

**Uso nos Hooks:**
- `usePatients`
- `useAgenda`
- `usePublicSchedule`

---

### `calculatePatientStats(appointments, whatsapp)` ‚ú® NOVO
**Arquivo**: `src/utils/patients/calculatePatientStats.js`

Calcula estat√≠sticas de um paciente espec√≠fico.

```javascript
import { calculatePatientStats } from "@/utils/patients/calculatePatientStats";

const appointments = [
  { patientWhatsapp: "11987654321", value: 150, status: "Confirmado" },
  { patientWhatsapp: "11987654321", value: 150, status: "Pendente" },
  { patientWhatsapp: "11987654321", value: 150, status: "Confirmado" }
];

calculatePatientStats(appointments, "11987654321");
// ‚ûú {
//   total: 3,
//   totalValue: 450,
//   confirmed: 2,
//   pending: 1,
//   noShow: 0
// }
```

**Retorna:** `Object`
```typescript
{
  total: number,          // Total de appointments
  totalValue: number,     // Soma dos valores
  confirmed: number,      // Status "Confirmado"
  pending: number,        // Status "Pendente"
  noShow: number          // Status "N√£o Compareceu"
}
```

---

## üìÖ Helpers de Appointments

### `getBookedSlotsForDate(appointments, date)` ‚ú® NOVO
**Arquivo**: `src/utils/appointments/getBookedSlots.js`

Retorna hor√°rios j√° agendados em uma data.

```javascript
import { getBookedSlotsForDate } from "@/utils/appointments/getBookedSlots";

const appointments = [
  { date: "2026-01-15", time: "08:00" },
  { date: "2026-01-15", time: "09:00" }
];

getBookedSlotsForDate(appointments, "2026-01-15");
// ‚ûú ["08:00", "09:00"] (ordenados)
```

**Uso nos Hooks:**
- `useAvailability`
- `usePublicSchedule`

---

### `hasAppointmentConflict(appointments, date, time)` ‚ú® NOVO
**Arquivo**: `src/utils/appointments/hasConflict.js`

Verifica se existe conflito de hor√°rio.

```javascript
import { hasAppointmentConflict } from "@/utils/appointments/hasConflict";

const appointments = [
  { date: "2026-01-15", time: "08:00" }
];

hasAppointmentConflict(appointments, "2026-01-15", "08:00");
// ‚ûú true (conflito!)

hasAppointmentConflict(appointments, "2026-01-15", "09:00");
// ‚ûú false (livre)
```

**Uso nos Hooks:**
- `useAvailability`
- `usePublicSchedule`

---

## üí¨ Helpers de Mensagens

### `generateWhatsappMessage(config)` ‚ú® NOVO
**Arquivo**: `src/utils/message/generateWhatsappMessage.js`

Gera mensagem formatada para WhatsApp.

```javascript
import { generateWhatsappMessage } from "@/utils/message/generateWhatsappMessage";

const message = generateWhatsappMessage({
  intro: "Ol√°",
  body: "Sua sess√£o est√° agendada",
  footer: "Nos vemos em breve",
  patientName: "Jo√£o",
  date: "15/01/2026",
  time: "14:00",
  value: 150,
  showValue: true
});

// message cont√©m a mensagem formatada
// ‚ûú "Ol√° Jo√£o
//    
//    Sua sess√£o est√° agendada
//    
//    Data: 15/01/2026
//    Hor√°rio: 14:00
//    Valor: R$ 150
//    
//    Nos vemos em breve"
```

**Config:**
```typescript
{
  intro?: string,           // Default: "Ol√°"
  body?: string,            // Default: "Sua sess√£o est√° agendada"
  footer?: string,          // Default: ""
  patientName?: string,     // Default: ""
  date?: string,            // DD/MM/YYYY
  time?: string,            // HH:mm
  value?: number,           // Default: 0
  showValue?: boolean       // Default: true
}
```

**Uso nos Hooks:**
- `useSettings` - Preview de mensagem

---

## üßë‚Äç‚öïÔ∏è Utilit√°rios de Pacientes ‚ú® NOVO

### `createPatientsMap(patients)` ‚ú® NOVO
**Arquivo**: `src/utils/patients/createPatientsMap.js`

Cria um mapa de pacientes indexado por WhatsApp para busca r√°pida.

```javascript
import { createPatientsMap } from "@/utils/patients/createPatientsMap";

const patients = [
  { whatsapp: '5511999999999', name: 'Jo√£o', referenceName: 'Jo√£o Silva' },
  { whatsapp: '5511888888888', name: 'Maria', referenceName: 'Maria Santos' }
];

const map = createPatientsMap(patients);
// ‚ûú {
//   '5511999999999': { whatsapp: '5511999999999', name: 'Jo√£o', ... },
//   '5511888888888': { whatsapp: '5511888888888', name: 'Maria', ... }
// }

// Uso em componentes
const patientsMap = React.useMemo(() => 
  createPatientsMap(patients), 
  [patients]
);

const patientData = patientsMap[appointment.patientWhatsapp];
```

**Par√¢metros:**
- `patients` (Array): Array de objetos paciente

**Retorna:** `Object` - Mapa `{ [whatsapp]: patient }`

**Uso nos Componentes:**
- `ConfirmedAppointmentsModal`
- `NoShowModal`
- `CancelledModal`
- `PendingAppointmentsModal`
- `useDashboardStats`
- `useDashboardCharts`

---

### `getPatientName({ patientData, appointment, defaultName })` ‚ú® NOVO
**Arquivo**: `src/utils/patients/getPatientName.js`

Obt√©m o nome do paciente com fallback hier√°rquico.

**Hierarquia de prioridade:**
1. `patientData.name` (nome completo do paciente - mais atualizado)
2. `patientData.referenceName` (nome de refer√™ncia do paciente)
3. `appointment.referenceName` (nome de refer√™ncia do appointment - fallback)
4. `appointment.patientName` (nome do appointment - fallback antigo)
5. `defaultName` (padr√£o: 'Sem nome')

```javascript
import { getPatientName } from "@/utils/patients/getPatientName";

// Com dados atualizados do paciente
const patientData = { name: 'Jo√£o Silva', referenceName: 'Jo√£o' };
const appointment = { referenceName: 'Jo√£o', patientName: 'Jo√£o Silva' };
getPatientName({ patientData, appointment });
// ‚ûú 'Jo√£o Silva'

// Sem patientData, usa dados do appointment
const appointment = { referenceName: 'Maria' };
getPatientName({ appointment });
// ‚ûú 'Maria'

// Sem dados, retorna padr√£o
getPatientName({});
// ‚ûú 'Sem nome'

// Com nome padr√£o customizado
getPatientName({ defaultName: 'Paciente n√£o identificado' });
// ‚ûú 'Paciente n√£o identificado'
```

**Par√¢metros:**
- `patientData` (Object, opcional): Dados do paciente do array patients
- `appointment` (Object, opcional): Dados do appointment (fallback)
- `defaultName` (string, opcional): Nome padr√£o se nenhum for encontrado (padr√£o: 'Sem nome')

**Retorna:** `string` - Nome do paciente

**Uso nos Componentes:**
- `ConfirmedAppointmentsModal`
- `NoShowModal`
- `CancelledModal`
- `PendingAppointmentsModal`
- `useDashboardCharts`

---

## üõ†Ô∏è Helpers Gerais

### `generateYearRange(range)`
**Arquivo**: `src/utils/helpers/yearHelpers.js`

Gera lista de anos para seletores.

```javascript
import { generateYearRange } from "@/utils/helpers/yearHelpers";

// Assumindo ano atual = 2026

generateYearRange(1);
// ‚ûú [2027, 2026, 2025] (ordem decrescente)

generateYearRange(2);
// ‚ûú [2028, 2027, 2026, 2025, 2024]
```

**Par√¢metros:**
- `range` (number): Quantos anos antes e depois (padr√£o: 1)

**Retorna:** `Array<number>` - Anos em ordem decrescente

---
